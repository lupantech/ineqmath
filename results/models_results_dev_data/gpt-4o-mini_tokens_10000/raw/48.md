## Problem

Let $x, y, z \in [-1, 3]$ such that $x + y + z = 3$. Find the smallest constant $C$ such that the following inequality holds for all $x, y, z$:
$$
x^2 + y^2 + z^2 \leq C.
$$

## Query

Task description: Please solve the problem with clear, rigorous, and logically sound steps. At the end of your response, state your answer in exactly this format: 'The answer is $C=X$', where X is your calculated numerical bound value. Example: 'The answer is $C=1$'.

Problem: Let $x, y, z \in [-1, 3]$ such that $x + y + z = 3$. Find the smallest constant $C$ such that the following inequality holds for all $x, y, z$:
$$
x^2 + y^2 + z^2 \leq C.
$$

Solution:

## Response

To solve the problem, we start with the given conditions: \( x, y, z \in [-1, 3] \) and \( x + y + z = 3 \). We need to find the smallest constant \( C \) such that the inequality 

\[
x^2 + y^2 + z^2 \leq C
\]

holds for all \( x, y, z \) satisfying these conditions.

First, we can use the identity that relates the sum of squares to the square of the sum:

\[
x^2 + y^2 + z^2 = (x + y + z)^2 - 2(xy + xz + yz).
\]

Since \( x + y + z = 3 \), we have:

\[
x^2 + y^2 + z^2 = 3^2 - 2(xy + xz + yz) = 9 - 2(xy + xz + yz).
\]

To maximize \( x^2 + y^2 + z^2 \), we need to minimize \( xy + xz + yz \). 

Next, we can express \( z \) in terms of \( x \) and \( y \):

\[
z = 3 - x - y.
\]

Substituting this into the expression for \( xy + xz + yz \):

\[
xy + xz + yz = xy + x(3 - x - y) + y(3 - x - y).
\]

Expanding this gives:

\[
xy + 3x - x^2 - xy + 3y - xy - y^2 = 3x + 3y - x^2 - y^2 - xy.
\]

Thus, we need to minimize \( 3(x + y) - (x^2 + y^2 + xy) \).

Now, we can use the method of Lagrange multipliers or analyze the boundaries of the variables \( x, y, z \) to find the maximum of \( x^2 + y^2 + z^2 \).

### Step 1: Analyze the boundaries

The variables \( x, y, z \) can take values in the interval \([-1, 3]\). We will check the extreme cases where \( x, y, z \) take values at the boundaries of this interval.

1. **Case 1**: \( x = 3, y = 0, z = 0 \)
   \[
   x^2 + y^2 + z^2 = 3^2 + 0^2 + 0^2 = 9.
   \]

2. **Case 2**: \( x = 0, y = 3, z = 0 \)
   \[
   x^2 + y^2 + z^2 = 0^2 + 3^2 + 0^2 = 9.
   \]

3. **Case 3**: \( x = 0, y = 0, z = 3 \)
   \[
   x^2 + y^2 + z^2 = 0^2 + 0^2 + 3^2 = 9.
   \]

4. **Case 4**: \( x = -1, y = -1, z = 5 \) (not valid since \( z \) exceeds 3).

5. **Case 5**: \( x = -1, y = 3, z = 1 \)
   \[
   x^2 + y^2 + z^2 = (-1)^2 + 3^2 + 1^2 = 1 + 9 + 1 = 11.
   \]

6. **Case 6**: \( x = 1, y = 1, z = 1 \)
   \[
   x^2 + y^2 + z^2 = 1^2 + 1^2 + 1^2 = 3.
   \]

7. **Case 7**: \( x = -1, y = 1, z = 3 \)
   \[
   x^2 + y^2 + z^2 = (-1)^2 + 1^2 + 3^2 = 1 + 1 + 9 = 11.
   \]

### Step 2: Conclusion

From the cases analyzed, the maximum value of \( x^2 + y^2 + z^2 \) occurs in cases where one variable is at its maximum (3) and the others are at their minimum (0), yielding a maximum of 9. However, the combination of \( x = -1, y = 3, z = 1 \) gives a higher value of 11.

Thus, the smallest constant \( C \) such that the inequality holds for all \( x, y, z \) is:

\[
C = 11.
\]

Therefore, the answer is 

\[
\text{The answer is } C=11.
\]